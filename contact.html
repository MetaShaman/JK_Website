<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Contact - Joon Kim Land Stewardship</title>
    <meta name="description" content="Get in touch with Joon Kim to discuss your land stewardship and project management needs. Schedule a complimentary consultation.">
    <link rel="stylesheet" href="css/styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=GA_MEASUREMENT_ID"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'GA_MEASUREMENT_ID');
    </script>

    <style>
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-logo">
                <a href="index.html">Joon Kim</a>
            </div>
            <ul class="nav-menu">
                <li class="nav-item">
                    <a href="index.html" class="nav-link">Home</a>
                </li>
                <li class="nav-item">
                    <a href="services.html" class="nav-link">Services</a>
                </li>
                <li class="nav-item">
                    <a href="about.html" class="nav-link">About</a>
                </li>
                <li class="nav-item">
                    <a href="contact.html" class="nav-link active">Contact</a>
                </li>
            </ul>
            <div class="nav-toggle" id="mobile-menu">
                <span class="bar"></span>
                <span class="bar"></span>
                <span class="bar"></span>
            </div>
        </div>
    </nav>

    <!-- Page Header -->
    <section class="page-header">
        <div class="container">
            <h1>Let's Connect</h1>
            <p>I'm eager to learn about your land and discuss how my services can help you achieve your goals. Please feel free to reach out using the contact information below, or fill out the form to schedule a complimentary consultation.</p>
        </div>
    </section>

    <!-- Contact Content -->
    <section class="contact-content">
        <div class="container">
            <div class="contact-grid">
                <!-- Contact Information -->
                <div class="contact-info">
                    <h2>Contact Information</h2>
                    <div class="contact-item">
                        <div class="contact-icon">
                            <i class="fas fa-envelope"></i>
                        </div>
                        <div class="contact-details">
                            <h3>Email</h3>
                            <p>ivanjoonkim@gmail.com</p>
                        </div>
                    </div>
                    <div class="contact-item">
                        <div class="contact-icon">
                            <i class="fas fa-map-marker-alt"></i>
                        </div>
                        <div class="contact-details">
                            <h3>Location</h3>
                            <p>315 Margarita Dr.<br>San Rafael, CA 94901</p>
                        </div>
                    </div>
                    
                    <!-- Service Areas -->
                    <div class="service-areas">
                        <h3>Service Areas</h3>
                        <p>Based in San Rafael, I primarily serve properties in Northern California, with extensive experience in:</p>
                        <ul>
                            <li>Marin County</li>
                            <li>Sonoma County</li>
                            <li>Napa County</li>
                            <li>San Francisco Bay Area</li>
                        </ul>
                        <p class="note">For properties outside these areas, please contact me to discuss availability.</p>
                    </div>
                </div>

                <!-- Contact Form -->
                <div class="contact-form">
                    <h2>Send Me a Message</h2>
                    <form id="contactForm" action="https://docs.google.com/forms/d/e/1FAIpQLSf76wgQZ6fUxB7f2Zt1Ppjw1hlQcoKqmk4Yn0O2R5Qmy9UHJA/formResponse" method="POST" target="_blank">
                        <div class="form-group">
                            <label for="email">Email *</label>
                            <input type="email" id="email" name="emailAddress" required>
                        </div>
                        <div class="form-group">
                            <label for="landLove">What is one thing that you love about your land?</label>
                            <input type="text" id="landLove" name="entry.428724634" placeholder="Tell me about your favorite aspect of your land">
                        </div>
                        <div class="form-group">
                            <label for="name">Full Name *</label>
                            <input type="text" id="name" name="entry.641543091" required>
                        </div>
                        <div class="form-group">
                            <label for="phone">Phone Number</label>
                            <input type="tel" id="phone" name="entry.1764103006">
                        </div>
                        <div class="form-group">
                            <label for="property-location">Land Location</label>
                            <input type="text" id="property-location" name="entry.1531760759" placeholder="City, State">
                        </div>
                        <div class="form-group">
                            <label for="property-size">Land Size</label>
                            <select id="property-size" name="entry.789863818">
                                <option value="">Select land size</option>
                                <option value="Under 1 acre">Under 1 acre</option>
                                <option value="1-5 acres">1-5 acres</option>
                                <option value="5-10 acres">5-10 acres</option>
                                <option value="10+ acres">10+ acres</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="services-interest">Services of Interest</label>
                            <div class="checkbox-group">
                                <label class="checkbox-label">
                                    <input type="checkbox" name="entry.911095196" value="Structural Repairs & Maintenance">
                                    Structural Repairs & Maintenance
                                </label>
                                <label class="checkbox-label">
                                    <input type="checkbox" name="entry.911095196" value="Landscape & Garden Projects">
                                    Landscape & Garden Projects
                                </label>
                                <label class="checkbox-label">
                                    <input type="checkbox" name="entry.911095196" value="Design Support & Implementation">
                                    Design Support & Implementation
                                </label>
                                <label class="checkbox-label">
                                    <input type="checkbox" name="entry.911095196" value="Project Tracking & Oversight">
                                    Project Tracking & Oversight
                                </label>
                                <label class="checkbox-label">
                                    <input type="checkbox" name="entry.911095196" value="Regulatory Compliance & Permitting">
                                    Regulatory Compliance & Permitting
                                </label>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="timeline">Project Timeline</label>
                            <select id="timeline" name="entry.847273278">
                                <option value="">Select timeline</option>
                                <option value="Immediate (within 1 month)">Immediate (within 1 month)</option>
                                <option value="Short-term (1-3 months)">Short-term (1-3 months)</option>
                                <option value="Medium-term (3-6 months)">Medium-term (3-6 months)</option>
                                <option value="Long-term (6+ months)">Long-term (6+ months)</option>
                                <option value="Ongoing stewardship">Ongoing stewardship</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="message">Current Challenges and Goals *</label>
                            <textarea id="message" name="entry.771214362" rows="5" placeholder="Please describe your current land challenges and goals." required></textarea>
                        </div>
                        <div class="form-group">
                            <label for="contact-method">Preferred Contact Method *</label>
                            <select id="contact-method" name="entry.2117189622" required>
                                <option value="">Select contact method</option>
                                <option value="Email">Email</option>
                                <option value="Phone Call">Phone Call</option>
                                <option value="Video call (Zoom/Google Meet)">Video call (Zoom/Google Meet)</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="best-time">Best Time to Contact</label>
                            <select id="best-time" name="entry.2015429434">
                                <option value="">Select best time</option>
                                <option value="Morning (9 AM - 12 PM)">Morning (9 AM - 12 PM)</option>
                                <option value="Afternoon (12 PM - 5 PM)">Afternoon (12 PM - 5 PM)</option>
                                <option value="Evening (5 PM - 8 PM)">Evening (5 PM - 8 PM)</option>
                            </select>
                        </div>
                        
                        <!-- Consultation Preference Section -->
                        <div class="form-group">
                            <label class="form-label-required">Consultation Preference *</label>
                            <div class="radio-group">
                                <label class="radio-option">
                                    <input type="radio" name="consultationType" value="discovery_call" required>
                                    <span class="radio-custom"></span>
                                    Schedule a 15 minute discovery call
                                </label>
                                <label class="radio-option">
                                    <input type="radio" name="consultationType" value="email_only" required>
                                    <span class="radio-custom"></span>
                                    Not ready to book a call now
                                </label>
                            </div>
                            <small class="form-help-text">💡 Discovery calls help us better understand your specific needs and provide tailored recommendations.</small>
                        </div>
                        
                        <!-- Calendly Widget Container (hidden by default) -->
                        <div id="calendly-container" class="calendly-container" style="display: none;">
                            <div class="calendly-header">
                                <h3>📅 Schedule Your 15-Minute Discovery Call</h3>
                                <p>Choose a time that works best for you. This will be a 15-minute complimentary discovery call to discuss your land stewardship needs and goals.</p>
                                <div class="calendly-instructions">
                                    <div class="instruction-step">
                                        <span class="step-number">1</span>
                                        <span>Fill out the form above with your project details</span>
                                    </div>
                                    <div class="instruction-step">
                                        <span class="step-number">2</span>
                                        <span>Schedule your discovery call below</span>
                                    </div>
                                    <div class="instruction-step">
                                        <span class="step-number">3</span>
                                        <span>Submit the form to send your information</span>
                                    </div>
                                </div>
                            </div>
                            <div class="calendly-inline-widget" data-url="https://calendly.com/joonkim_schedule/land-stewardship-discovery-call?prefill[email]=&prefill[name]=&prefill[first_name]=&prefill[last_name]=&prefill[phone]=&prefill[location]=&prefill[note]=" style="min-width:320px;height:700px;"></div>
                            <div id="call-scheduled-status" class="call-status" style="display: none;">
                                <div class="status-success">
                                    <i class="fas fa-check-circle"></i>
                                    <span>✅ Discovery call scheduled successfully!</span>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Hidden field to track call scheduling -->
                        <input type="hidden" id="call-scheduled" name="callScheduled" value="false">
                        
                        <!-- Hidden fields for Calendly booking data -->
                        <input type="hidden" id="appointment-booked" name="entry.905794834" value="No">
                        <input type="hidden" id="appointment-type" name="entry.1099853613" value="">
                        <input type="hidden" id="appointment-date" name="entry.507706455" value="">
                        <input type="hidden" id="appointment-time" name="entry.836387002" value="">
                        <input type="hidden" id="appointment-info" name="entry.1480507405" value="">
                        
                        <button type="submit" class="btn btn-primary">Send Message</button>
                        
                        <!-- Debug button for testing -->
                        <button type="button" class="btn btn-secondary" style="margin-left: 10px; font-size: 12px;" onclick="simulateCallScheduled()">Test: Simulate Call Scheduled</button>
                        <button type="button" class="btn btn-secondary" style="margin-left: 10px; font-size: 12px;" onclick="testCalendlyListener()">Test: Check Calendly</button>
                        <button type="button" class="btn btn-secondary" style="margin-left: 10px; font-size: 12px;" onclick="manualBookingComplete()">Manual: Set Booking State</button>

                        <!-- Manual trigger button for testing
                        <button type="button" class="btn btn-warning btn-sm" onclick="markCallAsScheduled({ source: 'manual test' })">🔧 Test: Simulate Call Booking</button> -->
                    </form>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>Joon Kim</h3>
                    <p>Land Stewardship & Project Management</p>
                    <p>San Rafael, CA</p>
                </div>
                <div class="footer-section">
                    <h4>Services</h4>
                    <ul>
                        <li><a href="services.html">Building & Infrastructure</a></li>
                        <li><a href="services.html">Land & Garden Projects</a></li>
                        <li><a href="services.html">Design & Implementation</a></li>
                        <li><a href="services.html">Oversight & Compliance</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4>Contact</h4>
                    <p><i class="fas fa-envelope"></i> ivanjoonkim@gmail.com</p>
                    <p><i class="fas fa-map-marker-alt"></i> 315 Margarita Dr., San Rafael, CA 94901</p>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2024 Joon Kim. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <!-- Calendly Integration -->
    <script type="text/javascript" src="https://assets.calendly.com/assets/external/widget.js" async></script>
    <script>
        // Simple Calendly integration
        function setupCalendlyIntegration() {
            console.log('🔧 Setting up simple Calendly integration...');
            
            // Wait for Calendly to be available
            const checkCalendly = setInterval(function() {
                if (window.Calendly && typeof window.Calendly === 'function') {
                    clearInterval(checkCalendly);
                    console.log('✅ Calendly is ready');
                    
                    // Set up simple event listener
                    try {
                        window.Calendly('onEventScheduled', function(e) {
                            console.log('🎉 Call scheduled:', e);
                            markCallAsScheduled();
                        });
                        console.log('✅ Calendly event listener set up');
                    } catch (error) {
                        console.error('❌ Error setting up Calendly listener:', error);
                    }
                }
            }, 1000);
            
            // Stop checking after 30 seconds
            setTimeout(function() {
                clearInterval(checkCalendly);
                console.log('⏰ Calendly setup timeout');
            }, 30000);
        }
        
        // Simple function to mark call as scheduled
        function markCallAsScheduled() {
            console.log('✅ Marking call as scheduled');
            
            // Update hidden fields
            const appointmentBooked = document.getElementById('appointment-booked');
            const appointmentType = document.getElementById('appointment-type');
            const appointmentDate = document.getElementById('appointment-date');
            const appointmentTime = document.getElementById('appointment-time');
            const appointmentInfo = document.getElementById('appointment-info');
            
            if (appointmentBooked) appointmentBooked.value = 'Yes';
            if (appointmentType) appointmentType.value = 'Land Stewardship Discovery Call';
            if (appointmentDate) appointmentDate.value = 'Scheduled via Calendly';
            if (appointmentTime) appointmentTime.value = 'Scheduled via Calendly';
            if (appointmentInfo) appointmentInfo.value = 'Land Stewardship Discovery Call - Scheduled via Calendly';
            
            // Update form state
            callScheduledField.value = 'true';
            callScheduledStatus.style.display = 'block';
            callScheduledStatus.scrollIntoView({ behavior: 'smooth', block: 'center' });
            
            // Clear any existing messages
            callScheduledStatus.innerHTML = '';
            
            // Show prominent success message
            const successMessage = document.createElement('div');
            successMessage.className = 'alert alert-success';
            successMessage.style.cssText = `
                background: linear-gradient(135deg, #d4edda 0%, #c3e6cb 100%);
                border: 2px solid #28a745;
                border-radius: 10px;
                padding: 20px;
                margin: 15px 0;
                text-align: center;
                box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            `;
            successMessage.innerHTML = `
                <div style="font-size: 24px; margin-bottom: 10px;">🎉</div>
                <h4 style="color: #155724; margin-bottom: 10px; font-weight: bold;">Call Successfully Booked!</h4>
                <p style="color: #155724; margin-bottom: 15px; font-size: 16px;">
                    Your 15-minute discovery call has been scheduled. You'll receive a confirmation email shortly.
                </p>
                <div style="background: #fff; padding: 15px; border-radius: 8px; border: 1px solid #28a745; margin: 10px 0;">
                    <strong style="color: #155724;">✅ Form is now unlocked</strong><br>
                    <small style="color: #6c757d;">You can now submit your project details below</small>
                </div>
            `;
            callScheduledStatus.appendChild(successMessage);
            
            // Add a subtle animation
            successMessage.style.animation = 'fadeInUp 0.5s ease-out';
            
            console.log('✅ Call scheduled successfully');
        }
        
        // Start Calendly integration
        setupCalendlyIntegration();
        
        // Handle consultation preference radio buttons
        document.addEventListener('DOMContentLoaded', function() {
            const discoveryCallRadio = document.querySelector('input[value="discovery_call"]');
            const emailOnlyRadio = document.querySelector('input[value="email_only"]');
            const calendlyContainer = document.getElementById('calendly-container');
            
            // Function to handle radio button changes
            function handleConsultationPreference() {
                if (discoveryCallRadio.checked) {
                    console.log('📅 Discovery call selected - showing Calendly widget');
                    calendlyContainer.style.display = 'block';
                    calendlyContainer.scrollIntoView({ behavior: 'smooth', block: 'center' });
                } else if (emailOnlyRadio.checked) {
                    console.log('📧 Email only selected - hiding Calendly widget');
                    calendlyContainer.style.display = 'none';
                }
            }
            
            // Add event listeners to radio buttons
            if (discoveryCallRadio) {
                discoveryCallRadio.addEventListener('change', handleConsultationPreference);
            }
            if (emailOnlyRadio) {
                emailOnlyRadio.addEventListener('change', handleConsultationPreference);
            }
            
            // Check initial state
            handleConsultationPreference();
        });
        
        // Test function for Calendly listener
        function testCalendlyListener() {
            console.log('🧪 Testing Calendly listener...');
            console.log('- window.Calendly exists:', !!window.Calendly);
            console.log('- window.Calendly type:', typeof window.Calendly);
            if (window.Calendly && typeof window.Calendly === 'function') {
                console.log('✅ Calendly is available');
            } else {
                console.log('❌ Calendly is not available');
            }
        }
        
        // Manual booking complete function
        function manualBookingComplete() {
            console.log('🧪 Manual booking complete...');
            markCallAsScheduled();
        }
        
        // Simulate call scheduled function
        function simulateCallScheduled() {
            console.log('🧪 Simulating call scheduled...');
            markCallAsScheduled();
        }
    </script>
</body>
</html>

